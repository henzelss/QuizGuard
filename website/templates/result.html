{% extends "dashboard.html" %}

{% block content %}
  <div class="container bg-container rounded p-5 text-light">
      
      <div class="accordion" id="accordionResult">
          <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  <h1>Quiz Result</h1>
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionResult">
                <div class="accordion-body">
                  <table class="table table-responsive text-dark">
                      <thead>
                          <tr>
                              <div class="row">
                                  <div class="col text-dark"><h5>Leader Board</h5></div>
                                  <!-- <div class="col d-flex justify-content-end"><button class="btn btn-warning d-print-none" >Print PDF</button></div> -->
                                  <!-- <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-warning d-print-none" data-bs-toggle="modal" data-bs-target="#ExportModal">
                                      <i class="fa-solid fa-file-export me-1"></i> Export
                                    </button>
                                  </div> -->
                              </div>
                              <th scope="col">Rank</th>
                              <th scope="col">Full Name</th>
                              <th scope="col">Score</th>
                              <th scope="col">Achievement</th>
                          </tr>
                      </thead>
                      <tbody>
                            {% for student in students %}
                              <tr>
                                  {% if loop.index == 1 %}
                                    <td><i class="fa-solid fa-trophy me-1"></i>{{ loop.index }}</td>
                                  {% elif loop.index == 2 %}
                                    <td><i class="fa-solid fa-medal me-2"></i>{{ loop.index }}</td>
                                  {% elif loop.index == 3 %}
                                    <td><i class="fa-solid fa-award me-2"></i>{{ loop.index }}</td>
                                  {% endif %}
                                  <td>{{ student.firstname|title }}&nbsp;{{ student.lastname|title }}</td>
                                  <td>{{ student.score}}/{{total_score}}</td>
                                  <td>None</td>
                              </tr>
                            {% endfor %}
                      </tbody>
                  </table>
                </div>
              </div>
          </div>
          <div class="accordion-item d-print-none">
              <h2 class="accordion-header d-print-none" id="headingViolations ">
                <button class="accordion-button collapsed d-print-none" type="button" data-bs-toggle="collapse" data-bs-target="#collapseViolations" aria-expanded="false" aria-controls="collapseViolations">
                  <h1>Quiz Violations</h1>
                </button>
              </h2>
              <div id="collapseViolations" class="accordion-collapse collapse d-print-none" aria-labelledby="headingViolations" data-bs-parent="#accordionResult">
                <div class="accordion-body d-print-none">
                    <table class="table table-responsive d-print-none">
                      <thead>
                          <tr>
                              <th>User ID</th>
                              <th>Full Name</th>
                              <th>Laptop Detected</th>
                              <th>Phone Detected</th>
                              <th>Head Pose</th>
                              <th>Switch Tabs</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% for violators in violations %}
                              <tr>
                                  <td>{{ violators.id }}</td>
                                  <td>{{ violators.firstname|title }}&nbsp;{{ violators.lastname|title }}</td>
                                  <td>{{ violators.laptop }}</td>
                                  <td>{{ violators.phone }}</td>
                                  <td>{{ violators.head_pose }}</td>
                                  <td>{{ violators.switch_tabs }}</td>
                              </tr>
                          {% endfor %}
                      </tbody>
                    </table>
                </div>
              </div>
          </div>
      </div>
  </div>

  <!-- Modal -->
  <div class="modal fade d-print-none" id="ExportModal" tabindex="-1" aria-labelledby="ExportModalLabel" aria-hidden="true">
    <div class="modal-dialog d-print-none rounded">
      <div class="modal-content d-print-none">
        <div class="modal-header d-print-none">
          <h5 class="modal-title" id="ExportModalLabel">Export</h5>
          <button type="button" class="btn-close bg-danger" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body d-print-none">
          <div class="row">
              <div class="col-2">
                <p class="text-start">Export</p>
              </div>
              <div class="col-9"> 
                  <a href="#" class="btn btn-success"><i class="fa-solid fa-file-csv me-1"></i>Top 5</a>
                  <a href="#" class="btn btn-success"><i class="fa-solid fa-file-csv me-1"></i>Top 10</a>
                  <a href="#" class="btn btn-success"><i class="fa-solid fa-file-csv me-1"></i>All</a>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <!-- <i class="fa-solid fa-file-csv me-1"></i> -->
    <!-- <script>
      document.querySelector(".btn-warning").addEventListener("click", function() {
      printTable();
    });
    
    function printTable() {
      window.print();
    }
      // prevent users from going back to the test
      // window.history.pushState(null, null, location.href);
      // window.onpopstate = function(event) 
      // {
      //   window.history.pushState(null, null, location.href);
      // };
  </script> -->
{% endblock %}